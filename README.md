# YiGG

HowTo setup YiGG.

## Releasing a new version

the release process follows two steps. You have to release a staging version first and if you are sure this version is working you can release this version to the live server.

### Staging server

add your ssh-key so the ssh-agent is able to use it

    $ ssh-add

to release the staging version go to your local yigg directory and run

    $ cap staging deploy

now you are able to test the changes on <http://staging.yigg.de>

### Live server

you can't access the live server directly, so you have to connect to the staging server

    $ ssh ec2-user@staging.yigg.de

on that server you will be able to run a deploy script to release the live version

    $ deploy/prod.sh

or you can connect to the live server with

    $ ssh/yigg_web.sh

## Frontend deployment

all yigg styles and js' are generated and minified with Grunt.js.

### Installing Grunt

first you have to install grunt

    $ npm install -g grunt-cli

then you have to switch to the yigg directory and run

    $ npm install

to install all dependencies.

### Running Grunt

if you finished all changes on the css or js files, run

    $ grunt

in the yigg directory to combine and minify all files.

### SCSS/SASS

the yigg style-sheets are written in sass. you can find them under

    data/sass

please don't edit the css files directly, because the are autogenerated and will be replaced every time you run the Grunt script.

### JavaScript

the global

    htdocs/js/ninjitsu.js

file is also generated with grunt. don't make changes to this file, change these instead:

    'htdocs/js/ninjaCommander.js'
    'htdocs/js/ninjaComs.js'
    'htdocs/js/ninjaValidator.js'
    'htdocs/js/ninjaUpdater.js'
    'htdocs/js/ninjaAction.js'
    'htdocs/js/ninja.js'

## Installation of symfony via svn externals. (optional)

this is not really necessary because the latest working version of symfony is included in this package

working with svn externals & git.

clone svn

    $ git svn clone http://svn.symfony-project.com/branches/1.3/lib lib/vendor/1.3

When a 1.4 update comes along, go to the lib/vendor/symfony-1.4 directory and execute the following command to update your copy.

     $ git svn rebase

Now take care of the svn externals by first retrieving a script that extends gits power (based on a work by Andre Pang) and running git-svn-update-externals inside the framework directory (lib/vendor/symfony-1.4).

    $ git clone git://git-sue.git.sourceforge.net/gitroot/git-sue/git-sue lib/vendor/git-sue
    $ cd lib/vendor/1.3
    $ ../git-sue/git-svn-update-externals

Assuming you are back on your project root directory, verify your Symfony installation.

    $ lib/vendor/1.3/data/bin/symfony -V

If Symfony has been installed correctly, the version should be displayed.
Notes: