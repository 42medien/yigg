CREATE TABLE auth_user_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, user_key VARCHAR(32) NOT NULL UNIQUE, created_at DATETIME, INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE category (id BIGINT AUTO_INCREMENT, name VARCHAR(128) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE comment (id BIGINT AUTO_INCREMENT, description TEXT NOT NULL, user_id BIGINT NOT NULL, comment_type BIGINT, email VARCHAR(128), name VARCHAR(128), is_online TINYINT DEFAULT '1', deleted_at DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, epoch_time FLOAT(18, 2), INDEX comment_created_at_idx (created_at), INDEX comment_epochtime_idx (epoch_time), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE comment_link (id BIGINT AUTO_INCREMENT, comment_id BIGINT, url VARCHAR(255), deleted_at DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX unique_comment_url_idx (comment_id, url), INDEX comment_id_idx (comment_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE deal (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, sponsoring_id BIGINT, credit FLOAT(18, 2) DEFAULT 0, debit FLOAT(18, 2) DEFAULT 0, payed TINYINT(1) DEFAULT '0', sponsor_deal_id BIGINT, buyer_first_name VARCHAR(255), buyer_last_name VARCHAR(255), buyer_street1 VARCHAR(255), buyer_street2 VARCHAR(255), buyer_city VARCHAR(255), buyer_state VARCHAR(255), buyer_zip VARCHAR(11), buyer_country VARCHAR(255), buyer_email VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX sponsoring_id_idx (sponsoring_id), INDEX user_id_idx (user_id), INDEX sponsor_deal_id_idx (sponsor_deal_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE domain (id BIGINT AUTO_INCREMENT, hostname VARCHAR(128) NOT NULL UNIQUE, yiggs BIGINT, stories BIGINT, distinct_users BIGINT, rss_feed VARCHAR(255), seitwert BIGINT, domain_status VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE email_lookup (id BIGINT AUTO_INCREMENT, user_id BIGINT, ip_address VARCHAR(15), INDEX email_lookup_ip_address_idx (ip_address), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE feed (id BIGINT AUTO_INCREMENT, url TEXT NOT NULL, load_time FLOAT(18, 2), change_frequency BIGINT, last_updated DATETIME, error VARCHAR(255), autoimport TINYINT(1) DEFAULT '0', last_imported BIGINT, user_id BIGINT, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE feed_entry (id BIGINT AUTO_INCREMENT, title TEXT, feed_id BIGINT, link TEXT, long_link TEXT, added_at DATETIME, description TEXT, epoch_time FLOAT(18, 2), created DATETIME, in_newsroom TINYINT(1), INDEX feed_id_idx (feed_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE file (id BIGINT AUTO_INCREMENT, file_directory VARCHAR(255), file_name VARCHAR(255), file_type VARCHAR(10), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE history (id BIGINT AUTO_INCREMENT, story_id BIGINT, user_id BIGINT, created_at DATETIME, INDEX history_created_at_idx (created_at), INDEX story_id_idx (story_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE invitation (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, place_id BIGINT NOT NULL, name VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, subject VARCHAR(255) NOT NULL, message TEXT, token VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX place_id_idx (place_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE notification_message (id BIGINT AUTO_INCREMENT, sender_id BIGINT DEFAULT '1' NOT NULL, recipient_id BIGINT NOT NULL, type VARCHAR(255) NOT NULL, text TEXT, status VARCHAR(255) DEFAULT 'new', ref_object_type VARCHAR(64), ref_object_id BIGINT, read_at DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX sender_id_idx (sender_id), INDEX recipient_id_idx (recipient_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE rating (id BIGINT AUTO_INCREMENT, ip_address VARCHAR(15), user_agent VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, epoch_time FLOAT(18, 2), INDEX rating_created_at_idx (created_at), INDEX rating_epoch_time_idx (epoch_time), INDEX rating_ipaddress_idx (ip_address), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE redirect (id BIGINT AUTO_INCREMENT, url TEXT NOT NULL, redirect_key VARCHAR(64) NOT NULL, title VARCHAR(128), description VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE redirect_log (id INT AUTO_INCREMENT, redirect_id BIGINT NOT NULL, language VARCHAR(12), user_agent VARCHAR(128), referer VARCHAR(255), ip_crc32 BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX redirect_id_idx (redirect_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE remember_key (id BIGINT AUTO_INCREMENT, remember_key VARCHAR(32), ip_address VARCHAR(15), created_at DATETIME, user_id BIGINT, INDEX rememberme_key_idx (remember_key), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE reset_password_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, reset_key VARCHAR(32), expires DATETIME, created_at DATETIME, INDEX resetpassword_key_idx (reset_key), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sponsoring (id BIGINT AUTO_INCREMENT, deal_id BIGINT NOT NULL, place_id BIGINT NOT NULL, invitation_user_id BIGINT, image_id BIGINT NOT NULL, image_title VARCHAR(255), sponsor_url VARCHAR(255) NOT NULL, payed TINYINT(1) DEFAULT '0', clicks BIGINT DEFAULT 0, impressions BIGINT DEFAULT 0, status TINYINT(1) DEFAULT '0', expires DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX deal_id_idx (deal_id), INDEX image_id_idx (image_id), INDEX invitation_user_id_idx (invitation_user_id), INDEX place_id_idx (place_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sponsoring_place (id BIGINT AUTO_INCREMENT, description TEXT NOT NULL, intern_url VARCHAR(255) NOT NULL, width INT NOT NULL, height INT NOT NULL, price FLOAT(18, 2) NOT NULL, capacity INT DEFAULT 1 NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE stopwords (id BIGINT AUTO_INCREMENT, word VARCHAR(100) NOT NULL, created_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE story (id BIGINT AUTO_INCREMENT, title VARCHAR(128) NOT NULL, internal_url VARCHAR(128), external_url VARCHAR(255), description TEXT NOT NULL, type BIGINT DEFAULT 0 NOT NULL, user_id BIGINT NOT NULL, domain_id BIGINT, image_id BIGINT, deleted_at DATETIME, epoch_time FLOAT(18, 2), created_at DATETIME NOT NULL, last_edited DATETIME NOT NULL, INDEX story_internal_url_idx (internal_url), INDEX story_external_url_idx (external_url), INDEX story_created_at_idx (created_at), INDEX story_epoch_time_idx (epoch_time), INDEX story_is_deleted_idx (deleted_at), UNIQUE INDEX story_sluggable_idx (internal_url), INDEX domain_id_idx (domain_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE story_category (id BIGINT AUTO_INCREMENT, story_id BIGINT NOT NULL, category_id BIGINT NOT NULL, INDEX category_id_idx (category_id), INDEX story_id_idx (story_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE story_comment (id BIGINT AUTO_INCREMENT, story_id BIGINT NOT NULL, comment_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX story_id_idx (story_id), INDEX comment_id_idx (comment_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE story_filter_option (id BIGINT AUTO_INCREMENT, name VARCHAR(20), value BIGINT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE story_index (id BIGINT AUTO_INCREMENT, title VARCHAR(128) NOT NULL, external_url TEXT, description TEXT NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE story_rating (id BIGINT AUTO_INCREMENT, story_id BIGINT, rating_id BIGINT, user_id BIGINT, INDEX story_rating_story_idx (story_id), INDEX rating_id_idx (rating_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE story_redirect (id BIGINT AUTO_INCREMENT, redirect_id BIGINT NOT NULL, story_id BIGINT NOT NULL, INDEX redirect_id_idx (redirect_id), INDEX story_id_idx (story_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE story_render (id BIGINT AUTO_INCREMENT, story_id BIGINT NOT NULL, user_id BIGINT NOT NULL, created_at DATETIME NOT NULL, epoch_time FLOAT(18, 2), INDEX story_render_created_at_idx (created_at), INDEX story_render_epoch_time_idx (epoch_time), INDEX story_id_idx (story_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE story_tag (id BIGINT AUTO_INCREMENT, story_id BIGINT NOT NULL, tag_id BIGINT NOT NULL, INDEX story_id_idx (story_id), INDEX tag_id_idx (tag_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE story_tweet (id BIGINT AUTO_INCREMENT, story_id BIGINT NOT NULL, tweet_id BIGINT NOT NULL, epoch_time FLOAT(18, 2), INDEX epoch_time_idx (epoch_time), INDEX story_id_idx (story_id), INDEX tweet_id_idx (tweet_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE system_stats (id BIGINT AUTO_INCREMENT, total_user INT, total_story INT, total_comments INT, total_friends INT, total_real_friends INT, total_groups INT, total_group_storys INT, total_votes INT, total_tags INT, calculated DATETIME, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tag (id BIGINT AUTO_INCREMENT, name VARCHAR(128) NOT NULL UNIQUE, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE task_status (id BIGINT AUTO_INCREMENT, description VARCHAR(128), task_name VARCHAR(128), is_locked TINYINT(1) DEFAULT '0', last_run DATETIME, status TEXT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tweet (id BIGINT AUTO_INCREMENT, twitter_id BIGINT NOT NULL, text VARCHAR(150) NOT NULL, source VARCHAR(150), username VARCHAR(150) NOT NULL, website_url VARCHAR(150), profile_image_url VARCHAR(255), deleted_at DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX comment_created_at_idx (created_at), INDEX twitter_id_idx (twitter_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE twitter_search (id BIGINT AUTO_INCREMENT, term VARCHAR(128) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE user (id BIGINT AUTO_INCREMENT, username VARCHAR(32) NOT NULL UNIQUE, salt VARCHAR(128) NOT NULL, password VARCHAR(128) NOT NULL, status TINYINT(1) DEFAULT '0', facebook_id VARCHAR(30), last_login DATETIME, email VARCHAR(255), privacy TINYINT(1) DEFAULT '0', block_post TINYINT(1) DEFAULT '0', last_ip VARCHAR(15), failed_logins INT, avatar_id BIGINT, award_comment VARCHAR(255), award_story VARCHAR(255), mclient_salt VARCHAR(64) NOT NULL, settings TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, deleted_at DATETIME, INDEX email_idx (email), INDEX mclient_salt_idx (mclient_salt), INDEX avatar_id_idx (avatar_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE user_domain_subscription (id BIGINT AUTO_INCREMENT, user_id BIGINT, domain_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX domain_id_idx (domain_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_following (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, following_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, UNIQUE INDEX unique_idx_idx (user_id, following_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE user_online_log (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_permission (id BIGINT AUTO_INCREMENT, user_id BIGINT, permission_level INT, INDEX permissions_idx (permission_level), INDEX permission_user_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE user_settings (id BIGINT, comment_notify TINYINT(1) DEFAULT '1', comment_email TINYINT(1) DEFAULT '1', pm_email TINYINT(1) DEFAULT '1', show_awards TINYINT(1) DEFAULT '1', display_help TINYINT(1) DEFAULT '1', twitterized TINYINT(1) DEFAULT '0', twitter_hash VARCHAR(128), tweet_stories TINYINT(1) DEFAULT '1', city VARCHAR(128), country VARCHAR(128), occupation VARCHAR(128), sex VARCHAR(255), birthday DATETIME, website VARCHAR(128), blog VARCHAR(128), last_sms DATETIME, mailbox_name VARCHAR(64), use_toolbar TINYINT(1) DEFAULT '1', twitter_name TEXT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE user_stats (user_id BIGINT, rank BIGINT, yipps BIGINT, comment_award BIGINT, reading_award BIGINT, storys_total BIGINT, comments_total BIGINT, external_comments_total BIGINT, friends_total BIGINT, external_friends_total BIGINT, external_yiggs_total BIGINT, yiggs_total BIGINT, story_renders_total BIGINT, last_calculated DATETIME, PRIMARY KEY(user_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE user_tag (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, tag_id BIGINT NOT NULL, INDEX tag_id_idx (tag_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE video_ad (id BIGINT AUTO_INCREMENT, title VARCHAR(128), code TEXT NOT NULL, internal_url VARCHAR(128), is_javascript TINYINT(1) DEFAULT '0', push TINYINT DEFAULT 1, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, deleted_at DATETIME, UNIQUE INDEX video_ad_sluggable_idx (internal_url), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE wspy_tweet (id BIGINT AUTO_INCREMENT, twitter_id BIGINT NOT NULL, text VARCHAR(255) NOT NULL, source TEXT, username VARCHAR(64) NOT NULL, link TEXT, profile_image TEXT, created_at DATETIME, language VARCHAR(5), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
ALTER TABLE auth_user_key ADD CONSTRAINT auth_user_key_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE comment ADD CONSTRAINT comment_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE comment_link ADD CONSTRAINT comment_link_comment_id_comment_id FOREIGN KEY (comment_id) REFERENCES comment(id);
ALTER TABLE deal ADD CONSTRAINT deal_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE deal ADD CONSTRAINT deal_sponsoring_id_sponsoring_id FOREIGN KEY (sponsoring_id) REFERENCES sponsoring(id);
ALTER TABLE deal ADD CONSTRAINT deal_sponsor_deal_id_deal_id FOREIGN KEY (sponsor_deal_id) REFERENCES deal(id);
ALTER TABLE email_lookup ADD CONSTRAINT email_lookup_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE feed ADD CONSTRAINT feed_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE feed_entry ADD CONSTRAINT feed_entry_feed_id_feed_id FOREIGN KEY (feed_id) REFERENCES feed(id);
ALTER TABLE history ADD CONSTRAINT history_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE history ADD CONSTRAINT history_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id);
ALTER TABLE invitation ADD CONSTRAINT invitation_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE invitation ADD CONSTRAINT invitation_place_id_sponsoring_place_id FOREIGN KEY (place_id) REFERENCES sponsoring_place(id);
ALTER TABLE notification_message ADD CONSTRAINT notification_message_sender_id_user_id FOREIGN KEY (sender_id) REFERENCES user(id);
ALTER TABLE notification_message ADD CONSTRAINT notification_message_recipient_id_user_id FOREIGN KEY (recipient_id) REFERENCES user(id);
ALTER TABLE redirect_log ADD CONSTRAINT redirect_log_redirect_id_redirect_id FOREIGN KEY (redirect_id) REFERENCES redirect(id);
ALTER TABLE remember_key ADD CONSTRAINT remember_key_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE reset_password_key ADD CONSTRAINT reset_password_key_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE sponsoring ADD CONSTRAINT sponsoring_place_id_sponsoring_place_id FOREIGN KEY (place_id) REFERENCES sponsoring_place(id);
ALTER TABLE sponsoring ADD CONSTRAINT sponsoring_invitation_user_id_user_id FOREIGN KEY (invitation_user_id) REFERENCES user(id);
ALTER TABLE sponsoring ADD CONSTRAINT sponsoring_image_id_file_id FOREIGN KEY (image_id) REFERENCES file(id);
ALTER TABLE sponsoring ADD CONSTRAINT sponsoring_deal_id_deal_id FOREIGN KEY (deal_id) REFERENCES deal(id);
ALTER TABLE story ADD CONSTRAINT story_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE story ADD CONSTRAINT story_domain_id_domain_id FOREIGN KEY (domain_id) REFERENCES domain(id);
ALTER TABLE story_category ADD CONSTRAINT story_category_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id);
ALTER TABLE story_category ADD CONSTRAINT story_category_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id);
ALTER TABLE story_comment ADD CONSTRAINT story_comment_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id);
ALTER TABLE story_comment ADD CONSTRAINT story_comment_comment_id_comment_id FOREIGN KEY (comment_id) REFERENCES comment(id);
ALTER TABLE story_rating ADD CONSTRAINT story_rating_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE story_rating ADD CONSTRAINT story_rating_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id);
ALTER TABLE story_rating ADD CONSTRAINT story_rating_rating_id_rating_id FOREIGN KEY (rating_id) REFERENCES rating(id) ON DELETE CASCADE;
ALTER TABLE story_redirect ADD CONSTRAINT story_redirect_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id);
ALTER TABLE story_redirect ADD CONSTRAINT story_redirect_redirect_id_redirect_id FOREIGN KEY (redirect_id) REFERENCES redirect(id);
ALTER TABLE story_render ADD CONSTRAINT story_render_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE story_render ADD CONSTRAINT story_render_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id);
ALTER TABLE story_tag ADD CONSTRAINT story_tag_tag_id_tag_id FOREIGN KEY (tag_id) REFERENCES tag(id);
ALTER TABLE story_tag ADD CONSTRAINT story_tag_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id);
ALTER TABLE story_tweet ADD CONSTRAINT story_tweet_tweet_id_tweet_id FOREIGN KEY (tweet_id) REFERENCES tweet(id);
ALTER TABLE story_tweet ADD CONSTRAINT story_tweet_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id);
ALTER TABLE user ADD CONSTRAINT user_avatar_id_file_id FOREIGN KEY (avatar_id) REFERENCES file(id);
ALTER TABLE user_domain_subscription ADD CONSTRAINT user_domain_subscription_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE user_domain_subscription ADD CONSTRAINT user_domain_subscription_domain_id_domain_id FOREIGN KEY (domain_id) REFERENCES domain(id);
ALTER TABLE user_following ADD CONSTRAINT user_following_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE user_online_log ADD CONSTRAINT user_online_log_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE user_permission ADD CONSTRAINT user_permission_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE user_tag ADD CONSTRAINT user_tag_user_id_user_id FOREIGN KEY (user_id) REFERENCES user(id);
ALTER TABLE user_tag ADD CONSTRAINT user_tag_tag_id_tag_id FOREIGN KEY (tag_id) REFERENCES tag(id);
